<body>
    <div>
        <img />
        <input type="file" />
    </div>
</body>
<script>
    const inp = document.querySelector( 'input' )
    const img = document.querySelector( 'img' )
    inp.onchange = function ()
    {
        const file = inp.files[ 0 ]
        const reader = new FileReader()
        //这种转换都是异步的，onload监听这种转换完成
        reader.readAsBinaryString( file )

        reader.onload = ( e ) =>
        {
            console.log( e.target.result )

            // fetch( 'http://localhost:8888/file/upload', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify( { data: btoa( e.target.result ) } )
            // } ).then( res =>
            // {
            //     console.log( res )
            // } )
            // img.src = e.target.result
        }


    }



</script>
<style>

</style>